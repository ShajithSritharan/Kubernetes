(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5250],{14758:function(e,t,n){"use strict";var a,r=n(2784);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}t.Z=function(e){return /*#__PURE__*/r.createElement("svg",i({width:15,height:15,viewBox:"0 0 15 15",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=/*#__PURE__*/r.createElement("path",{d:"M4.5 6.5L1.328 9.672a2.828 2.828 0 104 4L8.5 10.5m2-2l3.172-3.172a2.829 2.829 0 00-4-4L6.5 4.5m-2 6l6-6",fill:"none",stroke:"currentColor"})))}},35174:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/team/create",function(){return n(20306)}])},3688:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var a,r=n(47842),i=n(52322),s=n(2784),o=n(45932),l=n(6039),c=/*#__PURE__*/n.n(l),u=(a={},(0,r.Z)(a,o.hT.CREATE_SURVEY_INCOMPLETE,[o.lp.CREATE_TEAM,o.lp.INVITE_MEMBERS,o.lp.PREFERENCES,o.lp.ROLE,o.lp.TOOLS]),(0,r.Z)(a,o.hT.CREATE_SURVEY_COMPLETE,[o.lp.CREATE_TEAM,o.lp.INVITE_MEMBERS]),(0,r.Z)(a,o.hT.JOIN_EXISTING_TEAM,[o.lp.PREFERENCES,o.lp.ROLE,o.lp.TOOLS]),a),m=/*#__PURE__*/(0,s.memo)(function(e){var t=e.step,n=e.flow,a=u[void 0===n?o.hT.CREATE_SURVEY_INCOMPLETE:n];return/*#__PURE__*/(0,i.jsxs)("div",{className:c().signUpStepInfo,children:[String(a.indexOf(t)+1)," of ",a.length]})})},52012:function(e,t,n){"use strict";n.d(t,{My:function(){return E},Qb:function(){return p},p9:function(){return f}});var a=n(98788),r=n(22970),i=n(5632),s=/*#__PURE__*/n.n(i),o=n(42541),l=n(90581),c=n(99669),u={defaultTTL:86400},m=new/*#__PURE__*/(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;(0,l.Z)(this,e),this._storage=t,this._options=n}var t=e.prototype;return t.setItem=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._options.defaultTTL,a=Math.floor(Date.now()/1e3);this._storage.setItem(e,{value:t,exp:a+n})},t.getItem=function(e){var t=this._storage.getItem(e);if(null==t||"object"!=typeof t)return t;if(!Reflect.has(t,"value")||!Reflect.has(t,"exp"))return console.warn('ExpiryLocalStorage.getItem("'.concat(e,'") - data is malformed'),t),null;var n=Math.floor(Date.now()/1e3);return n>t.exp?(console.debug('ExpiryLocalStorage.getItem("'.concat(e,'") - data has expired ').concat(n-t.exp," seconds ago")),this._storage.removeItem(e),null):t.value},t.removeItem=function(e){this._storage.removeItem(e)},t.clear=function(){this._storage.clear()},e}())(c.J),d="auth/redirect";function h(e){return!(!e.startsWith("/")||e.includes("/../")||e.includes("/./")||e.includes("//"))}function f(e){if(!h(e)){console.warn("Invalid redirect path attempted: ".concat(e));return}var t=e.replace(/[<>"']/g,"").replace(/javascript:/gi,"").replace(/data:/gi,"");m.setItem(d,t,900)}function E(){var e=m.getItem(d);return"string"!=typeof e?null:h(e)?e:(console.warn("Invalid redirect path found in storage: ".concat(e)),v(),null)}function v(){m.removeItem(d)}function p(e,t){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)(function(e,t){var n;return(0,r.__generator)(this,function(a){switch(a.label){case 0:if(n=E(),console.debug("Redirect to ".concat(null!=n?n:e)),!(n&&h(n)))return[3,2];return v(),o.Z.trackEvent("login-page","redirect_to_saved_path",{source:t,url:n,workspaceId:n.split("/")[2]}),[4,s().replace(n)];case 1:return a.sent(),[3,4];case 2:return[4,s().replace(e)];case 3:a.sent(),a.label=4;case 4:return[2]}})})).apply(this,arguments)}},20306:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var a,r,i=n(87394),s=n(52322),o=n(2784),l=n(5632),c=n(11269),u=n(96933),m=n(66161),d=n(45932),h=n(53562),f=n(42541),E=n(48617),v=n(3688),p=n(70865),g=n(96670),_=n(63955),T=n(76793),b=n(55929),x=n(95162),I=n(10380),w=n(94254),j=n(30739),C=/*#__PURE__*/(0,o.memo)(function(e){var t=e.className,n=e.onTeamCreated,a=(0,_.cI)({reValidateMode:"onChange"}),r=a.register,i=a.formState,o=a.handleSubmit,l=i.errors,c=i.submitCount,u=(0,T.K)({onSuccess:n}),m=u.canCreateTeam,d=u.isLoadingCreateTeamCheck,h=u.handleCreateTeam,f=u.error,E=u.loading,v=u.defaultTeamName;return/*#__PURE__*/(0,s.jsxs)(s.Fragment,{children:[/*#__PURE__*/(0,s.jsx)("form",{id:"create-team-form",onSubmit:o(h),children:/*#__PURE__*/(0,s.jsx)(I.Z,{className:t,children:/*#__PURE__*/(0,s.jsx)(b.Z,(0,g.Z)((0,p.Z)({size:b.Z.Sizes.LARGE,label:"Team Name",placeholder:"Team Name",autoFocus:!0,defaultValue:v},r("name",{required:!0,minLength:1,maxLength:64})),{error:l.name,touched:c>0}))})}),/*#__PURE__*/(0,s.jsx)(w.Z,{children:/*#__PURE__*/(0,s.jsx)(x.ZP,{form:"create-team-form","data-testid":"create-team-btn",variant:x.ZP.Variants.REGULAR,size:x.ZP.Sizes.X_LARGE,isLoading:E,disabled:!m||d,type:"submit",children:"Continue"})}),/*#__PURE__*/(0,s.jsx)(j.Z,{error:null==f?void 0:f.message})]})});function Z(){return(Z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}var L=function(e){return /*#__PURE__*/o.createElement("svg",Z({width:15,height:15,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a||(a=/*#__PURE__*/o.createElement("g",{fill:"var(--green-success)"},/*#__PURE__*/o.createElement("path",{d:"M5.5 0a3.499 3.499 0 100 6.996A3.499 3.499 0 105.5 0zM3.5 8.994a3.5 3.5 0 00-3.5 3.5v2.497h11v-2.497a3.5 3.5 0 00-3.5-3.5h-4zM12.5 10H12v5h3v-2.5a2.5 2.5 0 00-2.5-2.5z"}),/*#__PURE__*/o.createElement("path",{d:"M11.5 4a2.5 2.5 0 100 5 2.5 2.5 0 000-5z"}))))},R=/*#__PURE__*/(0,o.memo)(function(e){var t=e.onTeamCreated,n=(0,h.Z)(),a=(0,u.aF)(),r=!!(null==a?void 0:a.surveyData);return(0,o.useEffect)(function(){f.Z.trackEvent("team_creation","step",{name:"team_name"})},[]),/*#__PURE__*/(0,s.jsxs)(E.Z,{label:"Team Name",labelIcon:/*#__PURE__*/(0,s.jsx)(L,{}),title:"What should we call your team?",footer:(null==n?void 0:n.length)?/*#__PURE__*/(0,s.jsxs)(s.Fragment,{children:["Or ",/*#__PURE__*/(0,s.jsx)("a",{href:"/team/join",children:"join existing team"})," instead"]}):null,children:[/*#__PURE__*/(0,s.jsx)("p",{children:"You can always change this later from settings."}),/*#__PURE__*/(0,s.jsx)(C,{onTeamCreated:t}),/*#__PURE__*/(0,s.jsx)(v.Z,{step:d.lp.CREATE_TEAM,flow:r?d.hT.CREATE_SURVEY_COMPLETE:d.hT.CREATE_SURVEY_INCOMPLETE})]})}),S=n(69023),M=n(11929),O=n(95550),y=n(44784),N=n(84054),k=n(52012),P=n(61579),A=n(34224),V=n(2595),z=n(14758),U=n(89038);function F(){return(F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(null,arguments)}var B=function(e){return /*#__PURE__*/o.createElement("svg",F({width:16,height:15,viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=/*#__PURE__*/o.createElement("g",{fill:"var(--green-success)"},/*#__PURE__*/o.createElement("path",{d:"M15.454.71a.5.5 0 01-.1.144L5.9 10.306l2.67 4.451a.5.5 0 00.889-.06L15.454.71zM5.194 9.6L.743 6.928a.5.5 0 01.06-.889L14.793.045a.5.5 0 00-.146.101L5.194 9.6z"}))))},G=n(70620),Y=/*#__PURE__*/n.n(G),X=/*#__PURE__*/(0,o.memo)(function(e){var t=e.teamId,n=(0,l.useRouter)(),a=(0,A.Z)(),r=(0,V.Z)(),i=(0,u.aF)(),c=!!(null==i?void 0:i.surveyData),m=(0,P._)(t),h=(0,_.cI)({mode:"onSubmit"}),T=h.register,b=h.formState,j=h.handleSubmit,C=h.reset;(0,o.useEffect)(function(){f.Z.trackEvent("team_creation","step",{name:"invite"})},[]),(0,o.useEffect)(function(){m.isEnabled||m.onTurnOn()},[m.isEnabled,m.onTurnOn]);var Z=(0,o.useCallback)(function(){f.Z.trackEvent("team_share_dialog","copy_link_click"),a(m.inviteLink)},[m.inviteLink]),L=(0,o.useCallback)(function(){if(!c){n.push("/user/survey");return}(0,k.Qb)("/dashboard/all","team_create")},[c,n.push]),R=(0,M.UK)(function(e){var n=e.email;r.promise((0,N.Z)({type:O.PA.Email,inviteTo:O.FU.Team,status:O.aj.Pending,teamId:t,inviterId:i.id,inviteeEmail:n},"team_creation"),{loading:"Inviting ".concat(n),success:"Invitation sent to ".concat(n),error:function(){return"Invite failed"}}),C()}).execute;return/*#__PURE__*/(0,s.jsxs)(E.Z,{className:Y().inviteMembersView,label:"Invite Teammates",labelIcon:/*#__PURE__*/(0,s.jsx)(B,{}),title:"Who do you collaborate with?",children:[/*#__PURE__*/(0,s.jsx)("p",{children:"Invite teammates. Everyone will have access to the same dashboard"}),/*#__PURE__*/(0,s.jsx)("form",{onSubmit:j(R),children:/*#__PURE__*/(0,s.jsxs)(I.Z,{children:[/*#__PURE__*/(0,s.jsx)(U.Z,(0,g.Z)((0,p.Z)({size:U.Z.Sizes.LARGE,label:"Invite Teammate",placeholder:"Email address",type:"email",autoComplete:"email"},T("email",{required:!0,validate:y.Le})),{button:/*#__PURE__*/(0,s.jsx)(x.ZP,{className:Y().inviteBtn,size:x.ZP.Sizes.LARGE,disabled:!b.isValid,onClick:j(R),children:"Invite"}),autoFocus:!0})),/*#__PURE__*/(0,s.jsx)("p",{children:/*#__PURE__*/(0,s.jsxs)("a",{className:Y().copyLink,onClick:Z,children:[/*#__PURE__*/(0,s.jsx)(z.Z,{}),"Copy invite link"]})})]})}),/*#__PURE__*/(0,s.jsx)(w.Z,{children:/*#__PURE__*/(0,s.jsx)(x.ZP,{"data-testid":"end-invite-members-btn",size:x.ZP.Sizes.X_LARGE,onClick:L,children:c?"Create Team":"Continue"})}),/*#__PURE__*/(0,s.jsx)(v.Z,{step:d.lp.INVITE_MEMBERS,flow:c?d.hT.CREATE_SURVEY_COMPLETE:d.hT.CREATE_SURVEY_INCOMPLETE})]})}),D=function(){var e=(0,o.useState)(),t=e[0],n=e[1],a=(0,i.Z)((0,c.p3)(),2),r=(a[0],a[1]),d=(0,l.useRouter)(),h=(0,u.aF)(),f=(0,o.useCallback)(function(e){r(e.id),n(e)},[r]);return d.isReady&&h?/*#__PURE__*/(0,s.jsx)(m.Z,{hideSplashOnLoad:!0,children:/*#__PURE__*/(0,s.jsx)(S.Z,{staticLogo:!0,children:t?/*#__PURE__*/(0,s.jsx)(X,{teamId:t.id}):/*#__PURE__*/(0,s.jsx)(R,{onTeamCreated:f})})}):null}},70620:function(e){e.exports={inviteMembersView:"InviteMembersView_inviteMembersView__5KFON",copyLink:"InviteMembersView_copyLink__31kg8",inviteBtn:"InviteMembersView_inviteBtn__fp20_"}},6039:function(e){e.exports={signUpStepInfo:"SignUpStepInfo_signUpStepInfo__FGUMO"}}},function(e){e.O(0,[2888],function(){return e(e.s=35174)}),_N_E=e.O()}]);